# Production MQTT Broker Configuration
# TLS/SSL enabled with authentication

# Standard MQTT listener (non-encrypted - for local testing only)
# In production, comment this out and use only TLS
# listener 1883
# allow_anonymous false

# TLS/SSL MQTT listener (Production)
listener 8883
protocol mqtt
allow_anonymous false

# TLS Configuration
cafile /mosquitto/config/certs/ca.crt
certfile /mosquitto/config/certs/server.crt
keyfile /mosquitto/config/certs/server.key
require_certificate false
tls_version tlsv1.2

# Authentication
password_file /mosquitto/config/passwd
acl_file /mosquitto/config/acl

# WebSocket support (optional, for web dashboards)
# listener 9001
# protocol websockets
# cafile /mosquitto/config/certs/ca.crt
# certfile /mosquitto/config/certs/server.crt
# keyfile /mosquitto/config/certs/server.key

# Persistence
persistence true
persistence_location /mosquitto/data/

# Logging
log_dest file /mosquitto/log/mosquitto.log
log_type all
log_timestamp true

# Connection settings
max_connections 1000
max_inflight_messages 20
max_queued_messages 10000

# Message size limit (1MB)
max_packet_size 1048576

# Retained messages
retained_persistence true

# Queue QoS 0 messages
queue_qos0_messages false

